<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../bootstrap-combined.min.css" rel="stylesheet" /><script type="text/javascript" src="../../jquery-1.9.1.min.js"></script><script type="text/javascript" src="../../bootstrap.min.js"></script><link href="../../styles.css" rel="stylesheet" /><link rel="icon" href="../../favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../../nav.js"></script><script type="text/javascript" src="../../index.js"></script><script type="text/javascript">var dox = {rootPath: "../../",platforms: ["dox"]};</script><title>Dispatch</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left" id="searchForm"><input id="search" type="text" class="search-query" placeholder="Filter" autocomplete="off"/></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="dox"><a href="#">dox</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><h1><code><span class="directive">class </span><span class="type">ufront.web.Dispatch</span><span class="keyword"> extends</span> <a class="type" href="../../haxe/web/Dispatch.html">Dispatch</a></code></h1></div><div class="body"><p class="availability">Available on all platforms</p><div class="doc"><p>An extension of <code><a href="../../haxe/web/Dispatch.html">haxe.web.Dispatch</a></code> modified for use in the ufront framework.</p>
<p>Key differences:</p><ul><li>It can check for HTTP methods (get/post) etc and specialised actions for those.</li><li>Dispatching returns the result of the called action</li><li>Processing the dispatch and executing the action are separated, so code (for example, ufront's DispatchModule) can intercept execution inbetween stages.</li><li>The controller, action and arguments that are used are recorded, to assist with unit testing.</li><li>It is case insensitive.  So "doSomethingLong" will resolve to "/somethinglong/" or "/SomethingLONG/" etc</li></ul>
<p>The important static macros and methods are still available here and function similarly to those in <code><a href="../../haxe/web/Dispatch.html">haxe.web.Dispatch</a></code>, except for the changes described above.</p></div><h2>Instance Fields</h2><div class="platform platform-dox"><a name="action"></a><h3><p><code><span class="keyword">var</span> <a href="#action"><span class="identifier">action</span></a>:<a class="type" href="../../Null.html">Null</a>&lt;<a class="type" href="../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>The name of the selected action to be used in the dispatch.</p>
<p>After a successful <code>processDispatchRequest</code>, it will contain the name of the action that
dispatch has chosen to execute.  eg. <code>doSomething</code> if <code>doSomething()</code> is to be called.</p>
<p>This can be useful to get Action Information while processing an ActionResult, for example,
while trying to find the appropriate View to use for an action.</p>
<p>Before a successful <code>processDispatchRequest</code>, it will be null.</p>
<p>This value can be changed, and will affect <code>executeDispatchRequest()</code>, do so at your peril.</p></div></div><div class="platform platform-dox"><a name="arguments"></a><h3><p><code><span class="keyword">var</span> <a href="#arguments"><span class="identifier">arguments</span></a>:<a class="type" href="../../Null.html">Null</a>&lt;<a class="type" href="../../Array.html">Array</a>&lt;<a class="type" href="../../Dynamic.html">Dynamic</a>&gt;&gt;</code></p></h3><div class="doc"><p>The arguments created based on the request.</p>
<p>After a successful <code>processDispatchRequest</code>, it will contain an array of the arguments sent to
the given action.</p>
<p>Before a successful <code>processDispatchRequest</code>, it will be null.</p>
<p>This value can be changed, and will affect <code>executeDispatchRequest()</code>, do so at your peril.</p></div></div><div class="platform platform-dox"><a name="controller"></a><h3><p><code><span class="keyword">var</span> <a href="#controller"><span class="identifier">controller</span></a>:<a class="type" href="../../Null.html">Null</a>&lt;{}&gt;</code></p></h3><div class="doc"><p>The controller / API object that was used.</p>
<p>After a successful <code>processDispatchRequest</code>, it will contain the object (controller) to be used
for dispatching.  This may be the object passed to Dispatch, or it may be another object, that
was used as a sub-dispatch.</p>
<p>This can be useful to get Controller Information while processing an ActionResult, for example,
while trying to find the appropriate View to use for a controller.</p>
<p>Before a successful <code>processDispatchRequest</code>, it will be null.</p>
<p>This value can be changed, and will affect <code>executeDispatchRequest()</code>, do so at your peril.</p></div></div><div class="platform platform-dox"><a name="method"></a><h3><p><code><span class="keyword">var</span> <a href="#method"><span class="identifier">method</span></a>:<a class="type" href="../../String.html">String</a></code></p></h3><div class="doc"><p>The method used in the request.</p>
<p>Is set via the constructor.  Whatever value this is set to will be transformed to lowercase.</p></div></div><div class="platform platform-dox"><a name="onProcessDispatchRequest"></a><h3><p><code><span class="keyword">var</span> <a href="#onProcessDispatchRequest"><span class="identifier">onProcessDispatchRequest</span></a>:<a class="type" href="../../tink/core/Signal.html">Signal</a>&lt;<a class="type" href="../../tink/core/Noise.html">Noise</a>&gt;</code></p></h3><div class="doc"><p>Fires whenever <code>processDispatchRequest</code> is called.</p>
<p>This allows you to listen to changes to the controller, action and arguments and process them accordingly.</p></div></div><div class="platform platform-dox"><a name="onProcessDispatchRequestTrigger"></a><h3><p><code><span class="keyword">var</span> <a href="#onProcessDispatchRequestTrigger"><span class="identifier">onProcessDispatchRequestTrigger</span></a>:<a class="type" href="../../tink/core/SignalTrigger.html">SignalTrigger</a>&lt;<a class="type" href="../../tink/core/Noise.html">Noise</a>&gt;</code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-dox"><a name="new"></a><h3><p><code><span class="keyword">function</span> <a href="#new"><span class="identifier">new</span></a>(url:<a class="type" href="../../String.html">String</a>, params:<a class="type" href="../../Map.html">Map</a>&lt;<a class="type" href="../../String.html">String</a>, <a class="type" href="../../String.html">String</a>&gt;, ?method:<a class="type" href="../../String.html">String</a> = null):<a class="type" href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Construct a new Dispatch object, for the given URL, parameters and HTTP method</p></div></div><div class="platform platform-dox"><a name="executeDispatchRequest"></a><h3><p><code><span class="keyword">function</span> <a href="#executeDispatchRequest"><span class="identifier">executeDispatchRequest</span></a>():<a class="type" href="../../Dynamic.html">Dynamic</a></code></p></h3><div class="doc"><p>Will execute the action, controller and arguments specified by <code>processDispatchRequest</code></p>
<p>The result of the action will be returned.</p>
<p>If <code>processDispatchRequest</code>has not been run, <code>DispatchError.DEMissing</code> will be thrown.</p>
<p>This method will not catch or handle <code><a href="../../haxe/web/Redirect.html">Redirect</a></code> exceptions in the same way as <code>runtimeReturnDispatch</code>.  If you are calling this method manually you should account for this.</p></div></div><div class="platform platform-dox"><a name="processDispatchRequest"></a><h3><p><code><span class="keyword">function</span> <a href="#processDispatchRequest"><span class="identifier">processDispatchRequest</span></a>(cfg:<a class="type" href="../../haxe/web/DispatchConfig.html">DispatchConfig</a>):<a class="type" href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Process the request and find the controller, action and arguments to be used.</p>
<p>The logic in processing the request is slightly different to <code><a href="../../haxe/web/Dispatch.html">haxe.web.Dispatch</a></code></p>
<p>Full list of differences:</p><ul><li>
<p>We call resolveNames(), and match against multiple names, so that we can find
  <code>post_doSubmit()</code> etc</p></li><li>We also make the method name lower-case, making Dispatch case insensitive.</li><li>
<p>When a successful match is found, we populate the "controller" and "action" and
  "argument" properties of the Dispatch object.</p></li></ul>
<p>This function does not execute the result, it merely populates <code>controller</code>, <code>action</code>
and <code>argument</code> properties.  Use <code>executeDispatchRequest</code> to then execute this request.</p></div></div><div class="platform platform-dox"><a name="runtimeDispatch"></a><h3><p><code><span class="keyword">function</span> <a href="#runtimeDispatch"><span class="identifier">runtimeDispatch</span></a>(cfg:<a class="type" href="../../haxe/web/DispatchConfig.html">DispatchConfig</a>):<a class="type" href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>The same as <code>runtimeReturnDispatch</code>, except it does not return a result, so it is consistent with the super class.</p></div></div><div class="platform platform-dox"><a name="runtimeReturnDispatch"></a><h3><p><code><span class="keyword">function</span> <a href="#runtimeReturnDispatch"><span class="identifier">runtimeReturnDispatch</span></a>(cfg:<a class="type" href="../../haxe/web/DispatchConfig.html">DispatchConfig</a>):Unknown</code></p></h3><div class="doc"><p>This simple calls <code>processDispatchRequest</code>,followed by <code>executeDispatchRequest</code></p>
<p>If a <code><a href="../../haxe/web/Redirect.html">Redirect</a></code> is thrown, it will rerun the two method recursively until a result is reached or an error thrown.</p>
<p>So the functionality is similar to the <code>runtimeDispatch</code> in <code><a href="../../haxe/web/Dispatch.html">haxe.web.Dispatch</a></code>, except ufront's processing rules are used, and a result is returned.</p></div></div><div class="platform platform-dox"><a name="toString"></a><h3><p><code><span class="keyword">function</span> <a href="#toString"><span class="identifier">toString</span></a>():<a class="type" href="../../String.html">String</a></code></p></h3><div class="doc"><p>When tracing arguments, a Dispatch argument can cause recursive errors.  Better to just have this return a String</p></div></div></div></div></div></body></html>