<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../../bootstrap-combined.min.css" rel="stylesheet" /><script type="text/javascript" src="../../../jquery-1.9.1.min.js"></script><script type="text/javascript" src="../../../bootstrap.min.js"></script><link href="../../../styles.css" rel="stylesheet" /><link rel="icon" href="../../../favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../../../nav.js"></script><script type="text/javascript" src="../../../index.js"></script><script type="text/javascript">var dox = {rootPath: "../../../",platforms: ["project"]};</script><title>HttpRequest</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left" id="searchForm"><input id="search" type="text" class="search-query" placeholder="Filter" autocomplete="off"/></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="project"><a href="#">project</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><h1><code><span class="directive">class </span><span class="type">ufront.web.context.HttpRequest</span></code></h1></div><div class="body"><p class="availability">Available on all platforms</p><div><table class="related-types toggle" style="margin-top:16px;"><tbody><tr><td colspan="2"><strong>Sub classes</strong></td></tr><tr><td width="12" style="vertical-align:top;"><a href="#" onclick="toggleInherited(this)"><img style="padding-top:4px;" src="../../../triangle-closed.png"></img></a></td><td class="toggle-hide"><a href="../../../php/ufront/web/context/HttpRequest.html">HttpRequest</a></td><td class="toggle-show"><table class="table table-condensed"><tbody><tr><td width="200"><a href="../../../php/ufront/web/context/HttpRequest.html">HttpRequest</a></td><td><p>An implementation of HttpRequest for PHP.</p></td></tr></tbody></table></td></tr></tbody></table></div><div class="doc"><p>A description of the current HttpRequest.</p>
<p>This base class is mostly abstract methods, each platform must implement the key details.</p></div><h2>Class Fields</h2><div class="platform platform-project"><a name="create"></a><h3><p><code><span class="keyword">static </span><span class="keyword">function</span> <a href="#create"><span class="identifier">create</span></a>():<a class="type" href="../../../ufront/web/context/HttpRequest.html">HttpRequest</a></code></p></h3><div class="doc"><p>Create a <code><a href="../../../ufront/web/context/HttpRequest.html">HttpRequest</a></code> using the platform specific implementation.</p>
<p>Currently supports PHP and Neko only.</p></div></div><h2>Instance Fields</h2><div class="platform platform-project"><a name="authorization"></a><h3><p><code><span class="keyword">var</span> <a href="#authorization"><span class="identifier">authorization</span></a>:{user:<a class="type" href="../../../String.html">String</a>, pass:<a class="type" href="../../../String.html">String</a>}</code></p></h3><div class="doc"><p>Gives the username and password supplied by the "Authorization" client header.</p>
<p>If no "Authorization" header was specified, it will return null.</p>
<p>If "Authorization" header was specified, but it did not have exactly two parameters, it will throw an exception.</p>
<p>To trigger the login box to open on the browser, use <code>context.response.requireAuthentication("Please login")</code>.</p></div></div><div class="platform platform-project"><a name="clientHeaders"></a><h3><p><code><span class="keyword">var</span> <a href="#clientHeaders"><span class="identifier">clientHeaders</span></a>:<a class="type" href="../../../ufront/core/MultiValueMap.html">MultiValueMap</a>&lt;<a class="type" href="../../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>The client headers supplied in the request.</p></div></div><div class="platform platform-project"><a name="clientIP"></a><h3><p><code><span class="keyword">var</span> <a href="#clientIP"><span class="identifier">clientIP</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The Client's IP address</p></div></div><div class="platform platform-project"><a name="cookies"></a><h3><p><code><span class="keyword">var</span> <a href="#cookies"><span class="identifier">cookies</span></a>:<a class="type" href="../../../ufront/core/MultiValueMap.html">MultiValueMap</a>&lt;<a class="type" href="../../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>The Cookie parameters for this request.</p></div></div><div class="platform platform-project"><a name="files"></a><h3><p><code><span class="keyword">var</span> <a href="#files"><span class="identifier">files</span></a>:<a class="type" href="../../../ufront/core/MultiValueMap.html">MultiValueMap</a>&lt;<a class="type" href="../../../ufront/web/upload/FileUpload.html">FileUpload</a>&gt;</code></p></h3><div class="doc"><p>File uploads that were part of a POST / multipart request.</p>
<p>Please note this is not populated automatically, you must use some request middleware to process the multipart data and populate the <code>files</code> with appropriate FileUploads.</p></div></div><div class="platform platform-project"><a name="hostName"></a><h3><p><code><span class="keyword">var</span> <a href="#hostName"><span class="identifier">hostName</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The host name of the current server</p></div></div><div class="platform platform-project"><a name="httpMethod"></a><h3><p><code><span class="keyword">var</span> <a href="#httpMethod"><span class="identifier">httpMethod</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The HTTP method used for the request.</p>
<p>Usually "get" or "post", but can be other things.</p>
<p>Case sensitivity depends on the environement.</p></div></div><div class="platform platform-project"><a name="params"></a><h3><p><code><span class="keyword">var</span> <a href="#params"><span class="identifier">params</span></a>:<a class="type" href="../../../ufront/core/MultiValueMap.html">MultiValueMap</a>&lt;<a class="type" href="../../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>A simple hash of all the parameters supplied in this request.</p>
<p>The parameters are collected in the following order:</p><ul><li>cookies</li><li>query-string parameters</li><li>post values</li></ul>
<p>with the latter taking precedence over the former.
For example, if both a cookie and a post variable define a parameter <code>name</code>, calling <code>request.params["name"]</code> will show the POST value.
In that example, if you would like to access all the various values of <code>name</code>, you can use <code>request.params.getAll("name")</code> or separately access <code>request.cookies</code> or <code>request.post</code>.</p></div></div><div class="platform platform-project"><a name="post"></a><h3><p><code><span class="keyword">var</span> <a href="#post"><span class="identifier">post</span></a>:<a class="type" href="../../../ufront/core/MultiValueMap.html">MultiValueMap</a>&lt;<a class="type" href="../../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>The POST parameters for this request.</p>
<p>Please note that if the request is a multipart request, and <code>parseMultipart</code> has not been called, it will be called to fetch all the post data from the various parts.
Because <code>parseMultipart</code> can only be called once, this will prevent you from being able to process any file uploads.
If you need access to file uploads, please ensure <code>parseMultipart</code> is called before <code>post</code> is accessed.
This can be achieved using upload middleware.</p>
<p>If any files were uploaded, they will appear in the "post" values with their parameter name, and the value will contain the original filename of the upload.</p></div></div><div class="platform platform-project"><a name="postString"></a><h3><p><code><span class="keyword">var</span> <a href="#postString"><span class="identifier">postString</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The POST query parameters.</p>
<p>Will return an empty String if there are no GET parameters.</p></div></div><div class="platform platform-project"><a name="query"></a><h3><p><code><span class="keyword">var</span> <a href="#query"><span class="identifier">query</span></a>:<a class="type" href="../../../ufront/core/MultiValueMap.html">MultiValueMap</a>&lt;<a class="type" href="../../../String.html">String</a>&gt;</code></p></h3><div class="doc"><p>The GET query parameters for this request.</p></div></div><div class="platform platform-project"><a name="queryString"></a><h3><p><code><span class="keyword">var</span> <a href="#queryString"><span class="identifier">queryString</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The GET query parameters.</p>
<p>Will return an empty String if there are no GET parameters.</p></div></div><div class="platform platform-project"><a name="scriptDirectory"></a><h3><p><code><span class="keyword">var</span> <a href="#scriptDirectory"><span class="identifier">scriptDirectory</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The path of the currently executing script.</p>
<p>This is the path to your <code>index</code> file, not to the current class or controller.</p>
<p>It will usually be an absolute path, but depending on the environment it may be relative.</p>
<p>@todo confirm this always has a traling slash.  It appears to...</p></div></div><div class="platform platform-project"><a name="uri"></a><h3><p><code><span class="keyword">var</span> <a href="#uri"><span class="identifier">uri</span></a>:<a class="type" href="../../../String.html">String</a></code></p></h3><div class="doc"><p>The Uri requested in this HTTP request.</p>
<p>This is the URI before any filters have been applied.</p></div></div><div class="platform platform-project"><a name="userAgent"></a><h3><p><code><span class="keyword">var</span> <a href="#userAgent"><span class="identifier">userAgent</span></a>:<a class="type" href="../../../ufront/web/UserAgent.html">UserAgent</a></code></p></h3><div class="doc"><p>Information about the user agent that made the request.</p></div></div><div class="platform platform-project"><a name="isMultipart"></a><h3><p><code><span class="keyword">function</span> <a href="#isMultipart"><span class="identifier">isMultipart</span></a>():<a class="type" href="../../../Bool.html">Bool</a></code></p></h3><div class="doc"><p>Check if the current request is a multipart/form-data request.</p>
<p>This is a shortcut for: <code>clientHeaders["Content-<a href="../../../Type.html">Type</a>"].startsWith("multipart/form-data")</code></p></div></div><div class="platform platform-project"><a name="parseMultipart"></a><h3><p><code><span class="keyword">function</span> <a href="#parseMultipart"><span class="identifier">parseMultipart</span></a>(?onPart:<a class="type" href="../../../ufront/web/context/OnPartCallback.html">OnPartCallback</a> = null, ?onData:<a class="type" href="../../../ufront/web/context/OnDataCallback.html">OnDataCallback</a> = null, ?onEndPart:<a class="type" href="../../../ufront/web/context/OnEndPartCallback.html">OnEndPartCallback</a> = null):<a class="type" href="../../../tink/Surprise.html">Surprise</a>&lt;<a class="type" href="../../../tink/Noise.html">Noise</a>, <a class="type" href="../../../tink/Error.html">Error</a>&gt;</code></p></h3><div class="doc"><p>Parse the multipart data of this request.</p>
<blockquote>
<p>Please note, if you merely wish to access file uploads, it is probably better to use an existing <code>ufront.app.RequestMiddleware</code> that parses multipart data and gives access to the uploads through <code>request.files</code>.
Calling parseMultipart() manually is mostly intended for people developing new file-upload middleware.</p></blockquote>
<p>If a POST request contains multipart data, <code>parseMultipart</code> must be called in order to have access to both the POST parameters and to uploaded files.</p>
<p>Accessing <code>httpRequest.post</code> on a multipart request will call <code>parseMultipart()</code> but not process any file uploads.
Because of this, it is recommended that you use a <code>ufront.app.RequestMiddleware</code> very early in your request, before <code>request.post</code> is ever called, so that you can parse your file uploads, even if you do not handle them until later.</p>
<p>In each platform's implementation of <code>parseMultipart()</code>, it should take care of parsing post variables to <code>request.post</code>, and then call the <code>onPart</code>, <code>onData</code> and <code>onEndPart</code> for each file upload.</p>
<p>You should only call <code>parseMultipart()</code> a maximum of once per request, and an exception will be thrown if you attempt to call it more than once.</p>
<p>If this method is called on a request which was not multipart encoded, the result is unspecified.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>onPart</td><td><p>(optional) - called once at the start of each new file: <code>onPart( paramName:<a href="../../../String.html">String</a>, origFileName:<a href="../../../String.html">String</a> )</code></p></td></tr><tr><td>onData</td><td><p>(optional) - called multiple times (in order) for each file: <code>onData( bytes:<a href="../../../haxe/io/Bytes.html">haxe.io.Bytes</a>, pos:<a href="../../../Int.html">Int</a>, length:<a href="../../../Int.html">Int</a> )</code></p></td></tr><tr><td>onEndPart</td><td><p>(optional) - called after all data for a part has been received.
It is safe to assume that only one of the callbacks will be running at a time, and that they will run in order for each file.
Even though the method signiatures here require returning a <code><a href="../../../tink/core/Future.html">tink.core.Future</a></code>, these will be ignored on some platforms, such as neko.  Check the documentation on the specific HttpRequest implementation for details.</p></td></tr></tbody></table></div></div></div></div></div></body></html>